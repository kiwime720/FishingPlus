<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fishing+</title>

  <!-- Tailwind & Outfit 폰트 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <!-- 분리된 CSS -->
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/home.css') }}"
  />
</head>
<body class="body-wrapper">
  <header>
    <h1>
      <a href="#" onclick="window.location.reload()" class="text-white no-underline">Fishing+</a>
    </h1>
    <nav class="absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-2">
      <button id="loginBtn" class="px-2 py-1 bg-indigo-600 text-white rounded">로그인</button>
      <a href="{{ url_for('board') }}" id="boardBtn" class="px-2 py-1 bg-indigo-600 text-white rounded">게시판</a>
    </nav>
  </header>

  <div id="main">
    <!-- ① 검색바 -->
    <div id="searchBar">
      <input
        type="text"
        id="mapSearch"
        placeholder="낚시터 검색"
      />
    </div>

    <!-- ② 필터 바: 유형 + 지역 -->
    <div id="filterBar" class="flex justify-center items-center mb-4 space-x-4">
      <div id="fishingModeToggle" class="flex space-x-4">
        <button data-type="저수지" class="mode-btn px-4 py-2 rounded-lg bg-white/20 text-white active">저수지</button>
        <button data-type="바다"   class="mode-btn px-4 py-2 rounded-lg bg-white/20 text-white">바다</button>
        <button data-type="평지"   class="mode-btn px-4 py-2 rounded-lg bg-white/20 text-white">평지</button>
      </div>
      <select id="regionSelect" class="px-4 py-2 rounded-lg bg-white text-gray-900">
        <option value="전체">전체</option>
        <option value="서울특별시">서울특별시</option>
        <option value="대전광역시">대전광역시</option>
        <option value="대구광역시">대구광역시</option>
        <option value="울산광역시">울산광역시</option>
        <option value="부산광역시">부산광역시</option>
        <option value="광주광역시">광주광역시</option>
        <option value="인천광역시">인천광역시</option>
        <option value="경기도">경기도</option>
        <option value="강원특별자치도">강원특별자치도</option>
        <option value="충청북도">충청북도</option>
        <option value="충청남도">충청남도</option>
        <option value="경상북도">경상북도</option>
        <option value="경상남도">경상남도</option>
        <option value="전북특별자치도">전북특별자치도</option>
        <option value="전라남도">전라남도</option>
      </select>
    </div>

    <!-- ③ 지도 렌더링 (Leaflet) -->
    <div class="map-container rounded-lg overflow-hidden shadow-lg mb-8">
      <div id="map" class="w-full h-96"></div>
    </div>

    <!-- ④ 스폿 클릭 시 띄울 정보창 -->
    <div id="infoWindow" class="info-window hidden">
      <button id="infoClose" class="info-close">✕</button>
      <div id="infoContent"></div>
    </div>

    <!-- ⑤ 정보 박스: 날씨 2개 → 물고기 -->
    <div class="info-container flex flex-col gap-4">

      <!-- 날씨 헤드라인 -->
      <div class="weather-headline flex justify-between items-center">
        <h3 class="text-lg font-semibold">오늘 날씨</h3>
        <h3 class="text-lg font-semibold">내일 날씨</h3>
      </div>

      <!-- 날씨 위젯 둘러싸기 -->
      <div class="flex gap-4">

        <!-- 날씨 위젯 1 -->
        <div class="info-box bg-white/20 p-4 rounded-lg shadow-lg flex-1">
          <div class="weather-widget-container">
            <div
              id="cloud-container"
              class="absolute top-0 right-0 w-36 h-36 sm:w-40 sm:h-40 z-30 cursor-pointer rounded-tr-3xl overflow-hidden"
            >
              <div
                id="cloud-tooltip"
                class="tooltip absolute top-20 right-2 sm:top-24 sm:right-4 bg-black/70 text-white px-3 py-1.5 rounded-md text-xs opacity-0 transition-opacity duration-300 pointer-events-none z-40 shadow-lg"
              >
                Click clouds for a surprise!
                <div class="absolute -top-1 right-3 w-3 h-3 bg-black/70 transform rotate-45"></div>
              </div>
            </div>
            <div class="relative z-20">
              <div
                id="dateTime"
                class="date-time text-sm font-light opacity-80 mb-1 tracking-wide animate-fadeInUp"
              ></div>
              <div class="current-weather flex items-center mb-2">
                <div class="weather-icon-main text-5xl mr-3">⛅</div>
                <div class="temp text-5xl font-semibold">
                  <span
                    id="temperature"
                    class="bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-300 animate-fadeInScaleUp delay-100"
                    >8°C</span
                  >
                </div>
              </div>
              <div
                id="location"
                class="location text-lg opacity-90 mb-4 tracking-wide animate-fadeInUp delay-200"
              >
                New York, USA
              </div>
              <div
                class="sun-info bg-black/30 backdrop-blur-sm rounded-2xl p-3 sm:p-4 flex justify-between items-center mb-4 border border-white/10 shadow-md animate-fadeInUp delay-300"
              >
                <div class="sunrise text-center">
                  <div class="sun-icon text-xl mb-1">☀️</div>
                  <div id="sunriseTime" class="text-xs opacity-80">6:14 am</div>
                </div>
                <div
                  id="dayLength"
                  class="day-length text-center text-sm opacity-90"
                >
                  11 h 42 m
                </div>
                <div class="sunset text-center">
                  <div class="sun-icon text-xl mb-1">🌙</div>
                  <div id="sunsetTime" class="text-xs opacity-80">5:56 pm</div>
                </div>
              </div>
              <div
                class="precipitation bg-white/10 backdrop-blur-sm rounded-xl p-3 flex items-center mb-4 border border-white/5 shadow-sm animate-fadeInUp delay-400"
              >
                <div
                  class="precip-icon text-2xl mr-2 text-blue-300 drop-shadow-lg animate-gentleBob"
                  >🌧️</div
                >
                <div id="precipitationChance" class="text-sm opacity-90"
                  >Rain 85%</div
                >
              </div>
              <div
                class="humidity-wind flex justify-between text-sm opacity-90 mb-5 animate-fadeInUp delay-500"
              >
                <div id="humidity">Humidity: 68%</div>
                <div id="windSpeed">Wind: 12 km/h</div>
              </div>
              <div class="forecast flex flex-nowrap justify-between pb-2">
                <!-- 예보 카드 4개 -->
              </div>
            </div>
          </div>
        </div>

        <!-- 날씨 위젯 2 -->
        <div class="info-box bg-white/20 p-4 rounded-lg shadow-lg flex-1">
          <div class="weather-widget-container">
            <div
              id="cloud-container-2"
              class="absolute top-0 right-0 w-36 h-36 sm:w-40 sm:h-40 z-30 cursor-pointer rounded-tr-3xl overflow-hidden"
            >
              <div
                id="cloud-tooltip-2"
                class="tooltip absolute top-20 right-2 sm:top-24 sm:right-4 bg-black/70 text-white px-3 py-1.5 rounded-md text-xs opacity-0 transition-opacity duration-300 pointer-events-none z-40 shadow-lg"
              >
                Click clouds for a surprise!
                <div class="absolute -top-1 right-3 w-3 h-3 bg-black/70 transform rotate-45"></div>
              </div>
            </div>
            <div class="relative z-20">
              <div
                id="dateTime-2"
                class="date-time text-sm font-light opacity-80 mb-1 tracking-wide animate-fadeInUp"
              ></div>
              <div class="current-weather flex items-center mb-2">
                <div class="weather-icon-main text-5xl mr-3">☁️</div>
                <div class="temp text-5xl font-semibold">
                  <span
                    id="temperature-2"
                    class="bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-300 animate-fadeInScaleUp delay-100"
                    >15°C</span
                  >
                </div>
              </div>
              <div
                id="location-2"
                class="location text-lg opacity-90 mb-4 tracking-wide animate-fadeInUp delay-200"
              >
                Busan, Korea
              </div>
              <div
                class="sun-info bg-black/30 backdrop-blur-sm rounded-2xl p-3 sm:p-4 flex justify-between items-center mb-4 border border-white/10 shadow-md animate-fadeInUp delay-300"
              >
                <div class="sunrise text-center">
                  <div class="sun-icon text-xl mb-1">☀️</div>
                  <div id="sunriseTime-2" class="text-xs opacity-80"
                    >5:45 am</div
                  >
                </div>
                <div
                  id="dayLength-2"
                  class="day-length text-center text-sm opacity-90"
                >
                  13 h 12 m
                </div>
                <div class="sunset text-center">
                  <div class="sun-icon text-xl mb-1">🌙</div>
                  <div id="sunsetTime-2" class="text-xs opacity-80"
                    >6:57 pm</div
                  >
                </div>
              </div>
              <div
                class="precipitation bg-white/10 backdrop-blur-sm rounded-xl p-3 flex items-center mb-4 border border-white/5 shadow-sm animate-fadeInUp delay-400"
              >
                <div
                  class="precip-icon text-2xl mr-2 text-blue-300 drop-shadow-lg animate-gentleBob"
                  >🌦️</div
                >
                <div id="precipitationChance-2" class="text-sm opacity-90"
                  >Drizzle 40%</div
                >
              </div>
              <div
                class="humidity-wind flex justify-between text-sm opacity-90 mb-5 animate-fadeInUp delay-500"
              >
                <div id="humidity-2">Humidity: 75%</div>
                <div id="windSpeed-2">Wind: 8 km/h</div>
              </div>
              <div class="forecast flex flex-nowrap justify-between pb-2">
                <!-- 예보 카드 4개 -->
              </div>
            </div>
          </div>
        </div>
      </div>

<!-- 물고기 정보 -->
      <div class="info-box bg-white/20 p-4 rounded-lg shadow-lg">
        <h2 class="text-xl mb-2">물고기 정보</h2>
        <p>최근 어획된 물고기 종류 및 비율</p>
        <div class="flex gap-2 mt-2" id="fishInfo">
          <!-- JS에서 동적 생성 -->
        </div>
      </div>
    </div>
  </div>

  <!-- 로그인 모달 -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <h3>로그인</h3>
      <label for="userId">ID</label>
      <input id="userId" type="text" placeholder="아이디 입력" />
      <label for="userPw">PW</label>
      <input id="userPw" type="password" placeholder="비밀번호 입력" />
      <div class="buttons">
        <button class="cancel" id="cancelBtn">취소</button>
        <button class="confirm" id="confirmBtn">확인</button>
      </div>
      <div class="modal-links">
        <a href="signup.html">회원가입</a>
        <span class="separator">|</span>
        <a href="find.html">ID/PW 찾기</a>
      </div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
></script>

  <!-- 로그인 모달 토글 스크립트 -->
  <script>
    document.getElementById("loginBtn").addEventListener("click", () => {
      document.getElementById("modalOverlay").style.display = "flex";
    });
    document.getElementById("cancelBtn").addEventListener("click", () => {
      document.getElementById("modalOverlay").style.display = "none";
    });
    document.getElementById("confirmBtn").addEventListener("click", () => {
      document.getElementById("modalOverlay").style.display = "none";
    });
  </script>

  <!-- 통합된 지도 & UI 기능 스크립트 -->
  <script src="{{ url_for('static', filename='js/home.js') }}"></script>
</body>
</html>